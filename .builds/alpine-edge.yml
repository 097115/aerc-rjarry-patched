---
image: alpine/edge
packages:
  - go
  - gnupg
  - notmuch-dev
  - scdoc
sources:
  - "https://git.sr.ht/~rjarry/aerc"
environment:
  DESTDIR: ./out
  GOFLAGS: "-tags=notmuch"
tasks:
  - checkfmt: |
      cd aerc
      make checkfmt
  - lint: |
      cd aerc
      make lint
  - build: |
      cd aerc
      make
  - install: |
      cd aerc
      make install
      make checkinstall
  - test: |
      cd aerc
      go test ./...
  - ancient-go-version: |
      go install golang.org/dl/go1.13@latest
      ~/go/bin/go1.13 download
      make GO=~/go/bin/go1.13
